<?xml version="1.0"?>
<robot name="mobile_base_system" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- MOBILE BASE SYSTEM -->
  <xacro:macro name="mobile_base_system" params=" parent:='world' ">

 
  <link name="root">
   <inertial>
     <origin xyz="0 0 0.0" rpy="0 0 0"/>
     <mass value="1"/>
     <inertia ixx="100"  ixy="0"  ixz="0" iyy="100" iyz="0" izz="100" />
   </inertial>

   <visual>
     <origin xyz="0 0 0" rpy="0 0 0" />
     <geometry>
       <mesh filename="package://iss_description/meshes/iss_stationary.dae" scale="1 1 1"/>
     </geometry>
   </visual>

   <collision>
     <origin xyz="0 0 0" rpy="0 0 0"/>
     <geometry>
       <mesh filename="package://iss_description/meshes/iss_stationary.dae" scale="1 1 1"/>
     </geometry>
   </collision>
  </link>

  <!-- Mobile Base System -->
  <link name="mobile_base_system">
   <inertial>
     <origin xyz="0 0 0.0" rpy="0 0 0"/>
     <mass value="1"/>
     <inertia ixx="100"  ixy="0"  ixz="0" iyy="100" iyz="0" izz="100" />
   </inertial>

   <visual>
     <origin xyz="0 0 0" rpy="0 0 0" />
     <geometry>
       <mesh filename="package://iss_description/meshes/mobile_base_system.dae" scale="1 1 1"/>
     </geometry>
   </visual>

   <collision>
     <origin xyz="0 0 0" rpy="0 0 0"/>
     <geometry>
       <mesh filename="package://iss_description/meshes/mobile_base_system.dae" scale="1 1 1"/>
     </geometry>
   </collision>
  </link>

  <!-- Modules in the ISS -->
  <link name="link_02_unity_node"/>
  <link name="link_09_destiny"/>
  <link name="link_14_s0_truss"/>

      
  <!-- ************************* -->    
  <!-- Joints for common modules -->  
  <!-- ************************* -->    

  <joint name="joint_world" type="fixed">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <parent link="${parent}"/>
      <child link="root"/>
  </joint>
  
  <!-- Joint for 02 Unity Node 1-->
  <joint name="joint_02_unity" type="fixed">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <parent link="root"/>
      <child link="link_02_unity_node"/>
  </joint>

  <!-- Joint for 09 Destiny Space Laboratory -->
  <joint name="joint_09_destiny" type="fixed">
      <origin rpy="0 0 0" xyz="0 -2.221 0"/>
      <parent link="link_02_unity_node"/>
      <child link="link_09_destiny"/>
  </joint>

  <!-- Joint for 14 S0 Truss -->
  <joint name="joint_14_s0_truss" type="fixed">
      <origin rpy="0 0 0" xyz="0.0  -0.96651 5.0071"/>
      <axis xyz="1 0 0"/>
      <parent link="link_09_destiny"/>
      <child link="link_14_s0_truss"/>
  </joint>


  <!-- *********************************************** -->
  <!-- Joint for Mobile base system w.r.t. to S0 Truss -->
  <!-- *********************************************** -->    
  <joint name="joint_mbs" type="prismatic">
      <origin rpy="0 0 0" xyz="-2.8655 -5.17 -0.59547"/>
      <axis xyz="1 0 0"/>
      <parent link="link_14_s0_truss"/>
      <child link="mobile_base_system"/>
      <limit effort="1000.0" lower="-15.0" upper="42.0" velocity="0.5"/>
  </joint>
  
  </xacro:macro> 
 
</robot>
